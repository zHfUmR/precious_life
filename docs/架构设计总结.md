# æ¶æ„è®¾è®¡æ€»ç»“ ğŸ¯

## ğŸ’¡ ä½ æå‡ºçš„é—®é¢˜å¾ˆæ£’ï¼

ä½ é—®ï¼š"**ä¸ºä»€ä¹ˆä¸æŠŠrepositoriesæ”¾åˆ°feature/dataå±‚ï¼Ÿ**"

è¿™ä¸ªé—®é¢˜ç›´å‡»æ¶æ„è®¾è®¡çš„æ ¸å¿ƒï¼è®©æˆ‘æ¥è§£é‡Šæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©çš„**æ··åˆæ–¹æ¡ˆ**ï¼š

## ğŸ¨ æœ€ç»ˆæ¶æ„è®¾è®¡

### ğŸ“Š æ•°æ®åˆ†ç±»åŸåˆ™

æˆ‘ä»¬æ ¹æ®**æ•°æ®çš„ä½¿ç”¨èŒƒå›´**æ¥å†³å®šRepositoryçš„ä½ç½®ï¼š

#### ğŸŒ å…¨å±€Repository (`lib/data/repositories/`)
**é€‚ç”¨äºï¼šå¤šä¸ªfeatureå…±äº«çš„æ•°æ®**

```
lib/data/repositories/
â”œâ”€â”€ weather_repository.dart    # todoã€homeã€dashboardéƒ½è¦ç”¨å¤©æ°”
â”œâ”€â”€ location_repository.dart   # å¤šä¸ªæ¨¡å—éƒ½éœ€è¦å®šä½æœåŠ¡
â””â”€â”€ settings_repository.dart   # å…¨å±€åº”ç”¨è®¾ç½®
```

**ä¸ºä»€ä¹ˆæ”¾åœ¨å…¨å±€ï¼Ÿ**
- âœ… **é¿å…é‡å¤ä»£ç **ï¼šä¸ç”¨åœ¨æ¯ä¸ªfeatureéƒ½å†™ä¸€éå¤©æ°”è·å–é€»è¾‘
- âœ… **ç¼“å­˜å…±äº«**ï¼šç”¨æˆ·åœ¨todoé¡µé¢è·å–çš„å¤©æ°”ï¼Œåˆ‡åˆ°homeé¡µé¢ç›´æ¥ç”¨ç¼“å­˜
- âœ… **æ•°æ®ä¸€è‡´æ€§**ï¼šç¡®ä¿æ‰€æœ‰é¡µé¢çœ‹åˆ°çš„å¤©æ°”æ•°æ®æ˜¯åŒæ­¥çš„

#### ğŸ  Feature-specific Repository (`lib/features/*/data/repositories/`)
**é€‚ç”¨äºï¼šå•ä¸€featureä½¿ç”¨çš„æ•°æ®**

```
lib/features/todo/data/repositories/
â””â”€â”€ todo_repository.dart       # åªæœ‰todoæ¨¡å—ä½¿ç”¨

lib/features/feed/data/repositories/
â””â”€â”€ feed_repository.dart       # åªæœ‰feedæ¨¡å—ä½¿ç”¨
```

**ä¸ºä»€ä¹ˆæ”¾åœ¨featureå†…ï¼Ÿ**
- âœ… **æ¨¡å—ç‹¬ç«‹æ€§**ï¼šæ¯ä¸ªfeatureå¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- âœ… **ä¸šåŠ¡èšåˆ**ï¼šç›¸å…³çš„ä¸šåŠ¡é€»è¾‘æ”¾åœ¨ä¸€èµ·ï¼Œæ›´å®¹æ˜“ç†è§£
- âœ… **å›¢é˜Ÿåä½œ**ï¼šä¸åŒå›¢é˜Ÿå¯ä»¥å¹¶è¡Œå¼€å‘ä¸åŒfeature

## ğŸ”¥ å®é™…å¯¹æ¯”

### åœºæ™¯1ï¼šå¤©æ°”æ•°æ®è·å–

**âŒ å¦‚æœæŠŠWeatherRepositoryæ”¾åœ¨featureå†…ï¼š**
```
lib/features/todo/data/repositories/weather_repository.dart
lib/features/home/data/repositories/weather_repository.dart  
lib/features/dashboard/data/repositories/weather_repository.dart
```
**é—®é¢˜**ï¼š
- é‡å¤ä»£ç 
- ç¼“å­˜ä¸å…±äº«ï¼ˆç”¨æˆ·ä½“éªŒå·®ï¼‰
- ç»´æŠ¤æˆæœ¬é«˜

**âœ… å…¨å±€WeatherRepositoryï¼š**
```
lib/data/repositories/weather_repository.dart  # æ‰€æœ‰featureå…±äº«
```
**ä¼˜åŠ¿**ï¼š
- ä»£ç å¤ç”¨
- ç¼“å­˜å…±äº«ï¼ˆå¿«é€Ÿå“åº”ï¼‰
- ç»Ÿä¸€ç»´æŠ¤

### åœºæ™¯2ï¼šå¾…åŠäº‹é¡¹æ•°æ®

**âœ… TodoRepositoryæ”¾åœ¨featureå†…ï¼š**
```
lib/features/todo/data/repositories/todo_repository.dart
```
**ä¼˜åŠ¿**ï¼š
- åªæœ‰todoåŠŸèƒ½ä½¿ç”¨ï¼Œä¸éœ€è¦å…±äº«
- ä¸šåŠ¡é€»è¾‘å†…èš
- ç‹¬ç«‹æµ‹è¯•å’Œç»´æŠ¤

## ğŸ—ï¸ æ¶æ„ä¼˜åŠ¿å¯¹æ¯”

### ä¼ ç»Ÿæ–¹å¼ vs æ··åˆæ–¹æ¡ˆ

| æ–¹é¢ | å…¨éƒ¨æ”¾å…¨å±€ | å…¨éƒ¨æ”¾feature | æ··åˆæ–¹æ¡ˆ âœ… |
|------|------------|---------------|-------------|
| ä»£ç å¤ç”¨ | âœ… å¾ˆå¥½ | âŒ å·® | âœ… å¹³è¡¡ |
| æ¨¡å—ç‹¬ç«‹æ€§ | âŒ å·® | âœ… å¾ˆå¥½ | âœ… å¹³è¡¡ |
| ç¼“å­˜å…±äº« | âœ… å¾ˆå¥½ | âŒ å·® | âœ… æœ‰é€‰æ‹©çš„å…±äº« |
| ç»´æŠ¤æˆæœ¬ | âŒ é›†ä¸­ä½†è€¦åˆ | âœ… åˆ†æ•£ä½†ç‹¬ç«‹ | âœ… åˆç†åˆ†å¸ƒ |
| å›¢é˜Ÿåä½œ | âŒ å®¹æ˜“å†²çª | âœ… ç‹¬ç«‹å¼€å‘ | âœ… å¹³è¡¡åä½œ |

## ğŸ’» ä»£ç ç¤ºä¾‹

### åœ¨ViewModelä¸­çš„ä½¿ç”¨

```dart
class WeatherCardVm extends ConsumerNotifier<WeatherCardState> {
  
  @override
  WeatherCardState build() => const WeatherCardState.initial();
  
  Future<void> loadData() async {
    try {
      // ä½¿ç”¨å…¨å±€WeatherRepositoryï¼ˆå¤šæ¨¡å—å…±äº«ï¼‰
      final weatherRepo = ref.read(weatherRepositoryProvider);
      final weather = await weatherRepo.getWeatherData(location);
      
      // ä½¿ç”¨Feature-specific TodoRepositoryï¼ˆå•æ¨¡å—ä½¿ç”¨ï¼‰
      final todoRepo = ref.read(todoRepositoryProvider);  // è¿™ä¸ªåœ¨todo featureå†…
      final todos = await todoRepo.getIncompleteTodos();
      
      state = state.copyWith(
        weather: weather,
        todos: todos,
      );
    } catch (e) {
      state = state.copyWith(error: e.toString());
    }
  }
}
```

## ğŸ¯ åˆ¤æ–­æ ‡å‡†

### ğŸ¤” ä»€ä¹ˆæ—¶å€™æ”¾å…¨å±€ï¼Ÿ
1. **å¤šä¸ªfeatureä½¿ç”¨** âœ“
2. **éœ€è¦ç¼“å­˜å…±äº«** âœ“  
3. **åŸºç¡€æœåŠ¡æ•°æ®**ï¼ˆå¤©æ°”ã€ä½ç½®ã€è®¾ç½®ï¼‰âœ“
4. **æ ¸å¿ƒä¸šåŠ¡æ•°æ®**ï¼ˆç”¨æˆ·ä¿¡æ¯ã€è®¤è¯ï¼‰âœ“

### ğŸ¤” ä»€ä¹ˆæ—¶å€™æ”¾featureå†…ï¼Ÿ
1. **å•ä¸€featureä½¿ç”¨** âœ“
2. **ä¸šåŠ¡ç‰¹å®šé€»è¾‘** âœ“
3. **å¤æ‚ä¸šåŠ¡è§„åˆ™** âœ“
4. **ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ** âœ“

## ğŸ‰ æ€»ç»“

ä½ çš„é—®é¢˜è®©æˆ‘é‡æ–°å®¡è§†äº†æ¶æ„è®¾è®¡ï¼æœ€ç»ˆçš„**æ··åˆæ–¹æ¡ˆ**ï¼š

### ğŸŒŸ æ ¸å¿ƒæ€æƒ³
**"æ ¹æ®æ•°æ®çš„ä½¿ç”¨èŒƒå›´å†³å®šRepositoryä½ç½®"**

- **å…±äº«æ•°æ®** â†’ å…¨å±€Repository
- **ä¸“å±æ•°æ®** â†’ Feature Repository

### ğŸš€ å®é™…æ•ˆæœ
1. **æœ€å¤§åŒ–ä»£ç å¤ç”¨**ï¼ˆå…±äº«æ•°æ®ä¸é‡å¤ï¼‰
2. **æœ€å¤§åŒ–æ¨¡å—ç‹¬ç«‹æ€§**ï¼ˆä¸“å±æ•°æ®å†…èšï¼‰
3. **æœ€ä½³ç”¨æˆ·ä½“éªŒ**ï¼ˆæ™ºèƒ½ç¼“å­˜ç­–ç•¥ï¼‰
4. **æœ€ä¼˜å¼€å‘ä½“éªŒ**ï¼ˆæ¸…æ™°çš„èŒè´£åˆ†ç¦»ï¼‰

è¿™ç§è®¾è®¡æ—¢å€Ÿé‰´äº†**DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰**çš„æ¨¡å—åŒ–æ€æƒ³ï¼Œåˆè€ƒè™‘äº†**å®é™…å·¥ç¨‹éœ€æ±‚**çš„ä»£ç å¤ç”¨ï¼Œæ˜¯ä¸€ä¸ªå®ç”¨ä¸”ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼

æ„Ÿè°¢ä½ æå‡ºè¿™ä¸ªæ·±åˆ»çš„é—®é¢˜ï¼Œè®©æˆ‘ä»¬çš„æ¶æ„è®¾è®¡æ›´åŠ å®Œå–„ï¼ğŸŠ 