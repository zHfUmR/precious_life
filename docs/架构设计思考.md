# æ¶æ„è®¾è®¡æ€è€ƒ ğŸ—ï¸

## ğŸ¤” Repositoryä½ç½®è®¾è®¡çš„æ€è€ƒ

### é—®é¢˜ï¼šRepositoryåº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ

**é€‰é¡¹Aï¼šå…¨å±€Repository** (`lib/data/repositories/`)
**é€‰é¡¹Bï¼šFeature-specific Repository** (`lib/features/*/data/repositories/`)

## ğŸ¯ æ··åˆæ–¹æ¡ˆè®¾è®¡

æ ¹æ®æ•°æ®çš„**å…±äº«ç¨‹åº¦**å’Œ**ä¸šåŠ¡å¤æ‚åº¦**æ¥å†³å®šRepositoryçš„ä½ç½®ï¼š

### ğŸ“Š åˆ†ç±»è§„åˆ™

#### ğŸŒ å…¨å±€Repository (lib/data/repositories/)
**é€‚ç”¨äºï¼šè·¨æ¨¡å—å…±äº«çš„æ ¸å¿ƒæ•°æ®**

```dart
// è¿™äº›æ•°æ®è¢«å¤šä¸ªfeatureä½¿ç”¨
lib/data/repositories/
â”œâ”€â”€ weather_repository.dart      # å¤©æ°”æ•°æ®ï¼štodoã€homeã€dashboardéƒ½éœ€è¦
â”œâ”€â”€ location_repository.dart     # ä½ç½®æ•°æ®ï¼šå¤šä¸ªæ¨¡å—éƒ½éœ€è¦
â”œâ”€â”€ settings_repository.dart     # è®¾ç½®æ•°æ®ï¼šå…¨å±€é…ç½®
â””â”€â”€ user_repository.dart         # ç”¨æˆ·æ•°æ®ï¼šè®¤è¯ã€ä¸ªäººä¿¡æ¯
```

#### ğŸ  Feature-specific Repository (lib/features/*/data/)
**é€‚ç”¨äºï¼šæ¨¡å—ç‰¹æœ‰çš„ä¸šåŠ¡æ•°æ®**

```dart
// è¿™äº›æ•°æ®åªåœ¨ç‰¹å®šæ¨¡å—ä½¿ç”¨
lib/features/todo/data/repositories/
â””â”€â”€ todo_repository.dart         # å¾…åŠäº‹é¡¹ï¼šåªæœ‰todoæ¨¡å—ä½¿ç”¨

lib/features/feed/data/repositories/
â””â”€â”€ feed_repository.dart         # ä¿¡æ¯æµï¼šåªæœ‰feedæ¨¡å—ä½¿ç”¨

lib/features/tools/data/repositories/
â””â”€â”€ tools_repository.dart        # å·¥å…·æ•°æ®ï¼šåªæœ‰toolsæ¨¡å—ä½¿ç”¨
```

## ğŸ”§ å…·ä½“å®æ–½æ–¹æ¡ˆ

### ç¬¬ä¸€æ­¥ï¼šæ•°æ®åˆ†ç±»

**ğŸŒ å…¨å±€å…±äº«æ•°æ®**ï¼š
- âœ… å¤©æ°”æ•°æ® (WeatherRepository) 
- âœ… ä½ç½®æ•°æ® (LocationRepository)
- âœ… ç”¨æˆ·è®¾ç½® (SettingsRepository)
- âœ… ä¸»é¢˜é…ç½® (ThemeRepository)

**ğŸ  æ¨¡å—ç‰¹æœ‰æ•°æ®**ï¼š
- âœ… å¾…åŠäº‹é¡¹ (TodoRepository)
- âœ… ä¿¡æ¯æµå†…å®¹ (FeedRepository) 
- âœ… å·¥å…·é›†åˆ (ToolsRepository)

### ç¬¬äºŒæ­¥ï¼šé‡æ–°ç»„ç»‡ç»“æ„

```
lib/
â”œâ”€â”€ data/                           # å…¨å±€å…±äº«æ•°æ®å±‚
â”‚   â”œâ”€â”€ repositories/               # è·¨æ¨¡å—Repository
â”‚   â”‚   â”œâ”€â”€ weather_repository.dart
â”‚   â”‚   â”œâ”€â”€ location_repository.dart
â”‚   â”‚   â””â”€â”€ settings_repository.dart
â”‚   â”œâ”€â”€ datasources/                # å…±äº«æ•°æ®æº
â”‚   â”‚   â”œâ”€â”€ local/
â”‚   â”‚   â””â”€â”€ remote/
â”‚   â””â”€â”€ models/                     # å…±äº«æ•°æ®æ¨¡å‹
â”‚       â”œâ”€â”€ weather/
â”‚       â””â”€â”€ location/
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ todo/
â”‚   â”‚   â”œâ”€â”€ data/                   # Todoæ¨¡å—ä¸“å±æ•°æ®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ todo_repository.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ datasources/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ todo_local_datasource.dart
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â””â”€â”€ todo.dart
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”œâ”€â”€ feed/
â”‚   â”‚   â”œâ”€â”€ data/                   # Feedæ¨¡å—ä¸“å±æ•°æ®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ feed_repository.dart
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â””â”€â”€ feed_item.dart
â”‚   â”‚   â””â”€â”€ ui/
â”‚   â””â”€â”€ tools/
â”‚       â”œâ”€â”€ data/                   # Toolsæ¨¡å—ä¸“å±æ•°æ®å±‚
â”‚       â”‚   â””â”€â”€ repositories/
â”‚       â”‚       â””â”€â”€ tools_repository.dart
â”‚       â””â”€â”€ ui/
â””â”€â”€ shared/                         # çœŸæ­£çš„å…±äº«ç»„ä»¶
    â””â”€â”€ widgets/
```

### ç¬¬ä¸‰æ­¥ï¼šä¾èµ–æ³¨å…¥ç­–ç•¥

```dart
// lib/data/providers/global_providers.dart
/// å…¨å±€å…±äº«çš„Repository Providers
final weatherRepositoryProvider = Provider<WeatherRepository>((ref) {
  return WeatherRepository();
});

final locationRepositoryProvider = Provider<LocationRepository>((ref) {
  return LocationRepository();
});

// lib/features/todo/data/providers/todo_providers.dart
/// Todoæ¨¡å—ä¸“å±çš„Repository Providers
final todoRepositoryProvider = Provider<TodoRepository>((ref) {
  // å¯èƒ½ä¾èµ–å…¨å±€çš„Repository
  final database = ref.read(databaseProvider);
  return TodoRepository(database);
});

// lib/features/feed/data/providers/feed_providers.dart  
/// Feedæ¨¡å—ä¸“å±çš„Repository Providers
final feedRepositoryProvider = Provider<FeedRepository>((ref) {
  return FeedRepository();
});
```

## ğŸ¯ åˆ¤æ–­æ ‡å‡†

### ğŸ¤ æ”¾åˆ°å…¨å±€Repositoryçš„æ ‡å‡†ï¼š
1. **å¤šæ¨¡å—ä½¿ç”¨**ï¼šè‡³å°‘2ä¸ªä»¥ä¸Šfeatureéœ€è¦è¿™ä¸ªæ•°æ®
2. **æ ¸å¿ƒä¸šåŠ¡æ•°æ®**ï¼šç”¨æˆ·ä¿¡æ¯ã€è®¾ç½®ã€è®¤è¯ç­‰
3. **åŸºç¡€æœåŠ¡æ•°æ®**ï¼šå¤©æ°”ã€ä½ç½®ã€ç½‘ç»œçŠ¶æ€ç­‰
4. **éœ€è¦å…±äº«ç¼“å­˜**ï¼šé¿å…é‡å¤è¯·æ±‚å’Œæ•°æ®ä¸ä¸€è‡´

### ğŸ  æ”¾åˆ°Feature Repositoryçš„æ ‡å‡†ï¼š
1. **å•ä¸€æ¨¡å—ä½¿ç”¨**ï¼šåªæœ‰ä¸€ä¸ªfeatureä½¿ç”¨
2. **ä¸šåŠ¡ç‰¹å®šé€»è¾‘**ï¼šä¸å…¶ä»–æ¨¡å—æ²¡æœ‰å…³è”
3. **å¤æ‚ä¸šåŠ¡è§„åˆ™**ï¼šéœ€è¦ç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘å¤„ç†
4. **ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ**ï¼šå¯ä»¥ç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•

## ğŸ’¡ å®é™…åº”ç”¨å»ºè®®

### å¯¹äºä½ çš„é¡¹ç›®ï¼š

**ç«‹å³è¿ç§»åˆ°Feature-specific**ï¼š
- âœ… `TodoRepository` â†’ `lib/features/todo/data/repositories/`
- âœ… `FeedRepository` â†’ `lib/features/feed/data/repositories/`

**ä¿æŒå…¨å±€å…±äº«**ï¼š
- âœ… `WeatherRepository` â†’ `lib/data/repositories/` (todoå’Œhomeéƒ½ç”¨)
- âœ… `LocationRepository` â†’ `lib/data/repositories/` (å¤šä¸ªæ¨¡å—éƒ½ç”¨)
- âœ… `SettingsRepository` â†’ `lib/data/repositories/` (å…¨å±€é…ç½®)

### è¿ç§»å¥½å¤„ï¼š
1. **æ›´æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œ**
2. **æ›´å¥½çš„ä»£ç ç»„ç»‡**
3. **æ›´å®¹æ˜“çš„å•å…ƒæµ‹è¯•**
4. **æ›´å¼ºçš„å›¢é˜Ÿåä½œèƒ½åŠ›**

## ğŸ‰ æ€»ç»“

è¿™ç§æ··åˆæ–¹æ¡ˆå…¼é¡¾äº†ï¼š
- **å…±äº«æ•°æ®çš„ä¸€è‡´æ€§** (å…¨å±€Repository)
- **æ¨¡å—çš„ç‹¬ç«‹æ€§** (Feature Repository)
- **ä»£ç çš„å¯ç»´æŠ¤æ€§** (åˆç†çš„èŒè´£åˆ†ç¦»)

é€‰æ‹©Repositoryä½ç½®çš„æ ¸å¿ƒåŸåˆ™æ˜¯ï¼š**æ ¹æ®æ•°æ®çš„ä½¿ç”¨èŒƒå›´å’Œä¸šåŠ¡å¤æ‚åº¦æ¥å†³å®š**ï¼ â­ 